<!doctype html><html lang=zh dir=auto>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no">
<meta name=robots content="index, follow">
<title>新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot | 王北洛写字的地方</title>
<meta name=keywords content="新年新家">
<meta name=description content="大年初五，GitHub给我送来了迟到的新年礼物：Copilot技术预览版的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在博客迁移的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于SHELL SCRIPT比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按tab就够了。
在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。
博文自动化发布 在新年新家系列的第二篇文章中，我总结了文章从完成写作到发布的四个步骤：
  从Hugo模板新建博文.md文件； 导入Obsidian中的写好的内容，并调整图片等markdown语法格式以能够被Hugo识别； 网站编译； 上传到托管平台。   而实现博文的自动化发布，就是希望通过编写SHELL脚本，通过一行命令完成以上四个步骤。
我将脚本的实现分为以下几个模块：初始化、meta-data（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。
初始化 在初始化模块，主要涉及参数传递和路径设置。 值得一提的是，在.sh脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了Author信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。
参数传递 发布文章时需要指定用于生成博文路径（url）的Hugo目录中的文件名filename、Obsidian中对应的文件名article_name.md、标签tags以及发布标识符auto_publish1：
# filename is used to define the url of the post filename=$1 # article_name is used to identify the file in obisidian workspace article_name=$2 # tags are used to define the tags of the post tags=$3 # auto_publish is used to define whether the post should be published automatically auto_publish=$4 在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如">
<meta name=author content="王北洛">
<link rel=canonical href=https://www.beiluowang.com/2022/02/new-year-new-home-surprising-copilot/>
<meta name=google-site-verification content="G-CH562R2704">
<link crossorigin=anonymous href=/assets/css/stylesheet.min.cc1547343f87ca142aad42a0546bd73b9c066941f954483203faa750b8c5b0db.css integrity="sha256-zBVHND+HyhQqrUKgVGvXO5wGaUH5VEgyA/qnULjFsNs=" rel="preload stylesheet" as=style>
<link rel=preload href=logo_pixel.png as=image>
<script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://www.beiluowang.com/favicon/favicon_pixel_128.png>
<link rel=icon type=image/png sizes=16x16 href=https://www.beiluowang.com/favicon/favicon_pixel_16.png>
<link rel=icon type=image/png sizes=32x32 href=https://www.beiluowang.com/favicon/favicon_pixel_32.png>
<link rel=apple-touch-icon href=https://www.beiluowang.com/favicon/favicon_pixel_128.png>
<link rel=mask-icon href=https://www.beiluowang.com/favicon/favicon_pixel_128.png>
<meta name=theme-color content="#2e2e33">
<meta name=msapplication-TileColor content="#2e2e33">
<meta name=generator content="Hugo 0.92.1">
<noscript>
<style>#theme-toggle,.top-link{display:none}</style>
<style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style>
</noscript>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-CH562R2704"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-CH562R2704',{anonymize_ip:!1})}</script>
<meta property="og:title" content="新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot">
<meta property="og:description" content="大年初五，GitHub给我送来了迟到的新年礼物：Copilot技术预览版的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在博客迁移的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于SHELL SCRIPT比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按tab就够了。
在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。
博文自动化发布 在新年新家系列的第二篇文章中，我总结了文章从完成写作到发布的四个步骤：
  从Hugo模板新建博文.md文件； 导入Obsidian中的写好的内容，并调整图片等markdown语法格式以能够被Hugo识别； 网站编译； 上传到托管平台。   而实现博文的自动化发布，就是希望通过编写SHELL脚本，通过一行命令完成以上四个步骤。
我将脚本的实现分为以下几个模块：初始化、meta-data（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。
初始化 在初始化模块，主要涉及参数传递和路径设置。 值得一提的是，在.sh脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了Author信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。
参数传递 发布文章时需要指定用于生成博文路径（url）的Hugo目录中的文件名filename、Obsidian中对应的文件名article_name.md、标签tags以及发布标识符auto_publish1：
# filename is used to define the url of the post filename=$1 # article_name is used to identify the file in obisidian workspace article_name=$2 # tags are used to define the tags of the post tags=$3 # auto_publish is used to define whether the post should be published automatically auto_publish=$4 在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如">
<meta property="og:type" content="article">
<meta property="og:url" content="https://www.beiluowang.com/2022/02/new-year-new-home-surprising-copilot/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-02-09T21:38:13+08:00">
<meta property="article:modified_time" content="2022-02-09T21:38:13+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot">
<meta name=twitter:description content="大年初五，GitHub给我送来了迟到的新年礼物：Copilot技术预览版的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在博客迁移的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于SHELL SCRIPT比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按tab就够了。
在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。
博文自动化发布 在新年新家系列的第二篇文章中，我总结了文章从完成写作到发布的四个步骤：
  从Hugo模板新建博文.md文件； 导入Obsidian中的写好的内容，并调整图片等markdown语法格式以能够被Hugo识别； 网站编译； 上传到托管平台。   而实现博文的自动化发布，就是希望通过编写SHELL脚本，通过一行命令完成以上四个步骤。
我将脚本的实现分为以下几个模块：初始化、meta-data（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。
初始化 在初始化模块，主要涉及参数传递和路径设置。 值得一提的是，在.sh脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了Author信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。
参数传递 发布文章时需要指定用于生成博文路径（url）的Hugo目录中的文件名filename、Obsidian中对应的文件名article_name.md、标签tags以及发布标识符auto_publish1：
# filename is used to define the url of the post filename=$1 # article_name is used to identify the file in obisidian workspace article_name=$2 # tags are used to define the tags of the post tags=$3 # auto_publish is used to define whether the post should be published automatically auto_publish=$4 在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.beiluowang.com/posts/"},{"@type":"ListItem","position":2,"name":"新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot","item":"https://www.beiluowang.com/2022/02/new-year-new-home-surprising-copilot/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot","name":"新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot","description":"大年初五，GitHub给我送来了迟到的新年礼物：Copilot技术预览版的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在博客迁移的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于SHELL SCRIPT比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按tab就够了。\n在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。\n博文自动化发布 在新年新家系列的第二篇文章中，我总结了文章从完成写作到发布的四个步骤：\n  从Hugo模板新建博文.md文件； 导入Obsidian中的写好的内容，并调整图片等markdown语法格式以能够被Hugo识别； 网站编译； 上传到托管平台。   而实现博文的自动化发布，就是希望通过编写SHELL脚本，通过一行命令完成以上四个步骤。\n我将脚本的实现分为以下几个模块：初始化、meta-data（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。\n初始化 在初始化模块，主要涉及参数传递和路径设置。 值得一提的是，在.sh脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了Author信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。\n参数传递 发布文章时需要指定用于生成博文路径（url）的Hugo目录中的文件名filename、Obsidian中对应的文件名article_name.md、标签tags以及发布标识符auto_publish1：\n# filename is used to define the url of the post filename=$1 # article_name is used to identify the file in obisidian workspace article_name=$2 # tags are used to define the tags of the post tags=$3 # auto_publish is used to define whether the post should be published automatically auto_publish=$4 在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如","keywords":["新年新家"],"articleBody":"大年初五，GitHub给我送来了迟到的新年礼物：Copilot技术预览版的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在博客迁移的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于SHELL SCRIPT比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按tab就够了。\n在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。\n博文自动化发布 在新年新家系列的第二篇文章中，我总结了文章从完成写作到发布的四个步骤：\n  从Hugo模板新建博文.md文件； 导入Obsidian中的写好的内容，并调整图片等markdown语法格式以能够被Hugo识别； 网站编译； 上传到托管平台。   而实现博文的自动化发布，就是希望通过编写SHELL脚本，通过一行命令完成以上四个步骤。\n我将脚本的实现分为以下几个模块：初始化、meta-data（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。\n初始化 在初始化模块，主要涉及参数传递和路径设置。 值得一提的是，在.sh脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了Author信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。\n参数传递 发布文章时需要指定用于生成博文路径（url）的Hugo目录中的文件名filename、Obsidian中对应的文件名article_name.md、标签tags以及发布标识符auto_publish1：\n# filename is used to define the url of the post filename=$1 # article_name is used to identify the file in obisidian workspace article_name=$2 # tags are used to define the tags of the post tags=$3 # auto_publish is used to define whether the post should be published automatically auto_publish=$4 在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如\n @王北洛\n  工作路径 需要分别设定Hugo Project和Obsidian Workspace的工作路径，并将Obsidian Workspace下的图片复制到Hugo Project中：cp -r \"$obsidian_workspace_path\"/images/. \"$hugo_project_path\"/static/images。\n在完成参数和工作路径的设置之后，便可以通过cd $hugo_project_path \u0026 hugo new posts/$filename.md命令创建新博文。\nFront Matter调整 在创建好的新博文$filename.md的Front Matter中，title默认的是$filename，tags是模版中设定的初始值，需要分别对其进行修改，即找到$filename.md文件中对应title和tags行进行内容替换。作为一个并不熟悉SHELL命令的人，我的想法是写一个for循环逐行查找。就在我键入相关注释文本之后，奇迹发生了：\n @王北洛\n  Copilot不但给我提供了实现功能的脚本代码，还准确地预测到了我将要进行tags信息的替换！\n至此，我已经拜倒于Copilot的强大功能之下，并开始喜不自胜——再也不用读函数文档啦——虽然我不了解sed，但一点也不妨碍Copilot帮我调用！当然，现实并没有这么美好，此时的沾沾自喜为我后面的踩坑埋下了伏笔。\n调整完Front Matter，还需要进行博文主体内容的合并，简单的cat命令就可以实现：cat \"$article_path\"  $filename.md。\n格式调整 由于Hugo不支持在$filename.md中直接调用html语句，要想实现图片居中和添加caption的功能，需要通过shortcode曲线救国。所以需要查找出$filename.md中涉及插入图片的段落进行修改。这不是一个简单的功能，但此时的我信心百倍，我深信，只要简单地在注释中写下：“edit the image script with caption from markdown to hugo shortcode”，只需要零点几秒钟，Copilot便会用魔法变出它的实现。不出我所料，Copilot马上给出了基于sed函数的实现。运行测试一下，sed error: ... \\2 not defined in the RE，竟然报错了。\n没关系，Copilot提供了好几种实现，试试其他的。error、error、输出结果不符合期待、error……当我把所有实现都试了一遍却没有一个可以正常工作的时候，我开始慌了。看着sed语句中密密麻麻的符号，我这时才意识到，我对这个函数一无所知。\n接下来便是漫长的爬坑，从stackoverflow到函数文档，历时半个下午，我才把这行代码调通——只是一个很简单的参数传递格式的问题。回去审视一下Copilot提供的代码，功能上满足要求的只有两种实现，而这两种实现都是错的。\n原来Copilot也会犯错。\n编译发布 因为考虑到有时还要在博文中添加一些视频和js脚本，而Obsidian本身对这两者的支持并不好，需要单独对$filename.md进行编辑，不能直接发布，所以定义了auto_publish的参数用来判断是否执行编译发布模块。\n这部分的脚本编写十分顺利，在# publish the post when auto_publish is true的指引下，一路tab就完成了。\n关于Copilot 关于Copilot，我最后再谈一下我的看法。它的功能不可谓不强大，甚至超出了我的想象。但是在使用的过程中，极易对其产生依赖性，甚至丧失独立思考的能力。对于一门不熟悉的编程语言，一旦遇到Copilot无法解决的问题或者给出的错误代码，由于没有线性的学习过程，很容易陷入手足无措的局面。\n但我还是会坚持使用Copilot，因为它确实能极大地提高功能实现的效率，并且不乏优秀的实现方案。我对自己的要求是，每一次按下tab键的时候，我至少要知道为什么。\n访问分析工具 很多互联网大厂都提高免费的网站访问分析工具，比如Google Analytics 、Bing Webmaster Tools以及Yandex metricad等。我没有太仔细地调研彼此间的差异，图方便直接选择了Google Analytics。配置过程比较方便，按照官网指引一步步操作，将提供的网站跟踪ID填入Hugo工程的配置文件中即可。\n域名映射 博客迁移的最后一步是域名映射。\n从2021年12月16日在Google Blogger发布第一篇文章，到今天也就不到两个月的时间。但我却感觉过了很久，已经习惯了时常打开管理主页看一看访问人数的增长，为每一个微小数字的增加而洋洋得意。在博客访问量即将突破1000的时候，我一遍又一遍地刷新管理页面，生怕错过了截图的时刻。在2022年1月15日深夜11:50，终于达到了博客访问量1000的目标，我把它截图发在了朋友圈里，“One Small Step”。\n 现在，我即将和Google Blogger说再见，希望自己在新的平台，用新的方式，坚持书写不变的初心，成为一名真正的写作者。\n  不将article_name直接作为filename的原因在于article_name一般为中文，将其用于url看起来不够和谐。 ↩︎\n   ","wordCount":"149","inLanguage":"zh","datePublished":"2022-02-09T21:38:13+08:00","dateModified":"2022-02-09T21:38:13+08:00","author":{"@type":"Person","name":"王北洛"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.beiluowang.com/2022/02/new-year-new-home-surprising-copilot/"},"publisher":{"@type":"Organization","name":"王北洛写字的地方","logo":{"@type":"ImageObject","url":"https://www.beiluowang.com/favicon/favicon_pixel_128.png"}}}</script>
</head>
<body id=top>
<script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script>
<header class=header>
<nav class=nav>
<div class=logo>
<a href=https://www.beiluowang.com/ accesskey=h title="王北洛写字的地方 (Alt + H)">
<img src=https://www.beiluowang.com/logo_pixel.png alt=logo aria-label=logo height=35>王北洛写字的地方</a>
<span class=logo-switches>
<button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
</button>
</span>
</div>
<ul id=menu>
<li>
<a href=https://www.beiluowang.com/archives/ title=归档>
<span>归档</span>
</a>
</li>
<li>
<a href=https://www.beiluowang.com/search/ title=搜索>
<span>搜索</span>
</a>
</li>
<li>
<a href=https://www.beiluowang.com/tags/ title=标签>
<span>标签</span>
</a>
</li>
<li>
<a href="https://beiluowang.notion.site/adfa90c174874672b5b7ce8c1df0f77b?v=0a96b967b2d64be9b7128322de01ae55" title=读书记录>
<span>读书记录</span>
</a>
</li>
<li>
<a href=https://www.beiluowang.com/about/ title=关于>
<span>关于</span>
</a>
</li>
</ul>
</nav>
</header>
<main class=main>
<article class=post-single>
<header class=post-header>
<h1 class=post-title>
新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot
</h1>
<div class=post-meta><span title="2022-02-09 21:38:13 +0800 CST">二月 9, 2022</span>&nbsp;·&nbsp;王北洛
</div>
</header> <div class=toc>
<details>
<summary accesskey=c title="(Alt + C)">
<span class=details>目录</span>
</summary>
<div class=inner><ul>
<li>
<a href=#%e5%8d%9a%e6%96%87%e8%87%aa%e5%8a%a8%e5%8c%96%e5%8f%91%e5%b8%83 aria-label=博文自动化发布>博文自动化发布</a><ul>
<li>
<a href=#%e5%88%9d%e5%a7%8b%e5%8c%96 aria-label=初始化>初始化</a><ul>
<li>
<a href=#%e5%8f%82%e6%95%b0%e4%bc%a0%e9%80%92 aria-label=参数传递>参数传递</a></li>
<li>
<a href=#%e5%b7%a5%e4%bd%9c%e8%b7%af%e5%be%84 aria-label=工作路径>工作路径</a></li></ul>
</li>
<li>
<a href=#front-matter%e8%b0%83%e6%95%b4 aria-label="Front Matter调整">Front Matter调整</a></li>
<li>
<a href=#%e6%a0%bc%e5%bc%8f%e8%b0%83%e6%95%b4 aria-label=格式调整>格式调整</a></li>
<li>
<a href=#%e7%bc%96%e8%af%91%e5%8f%91%e5%b8%83 aria-label=编译发布>编译发布</a></li>
<li>
<a href=#%e5%85%b3%e4%ba%8ecopilot aria-label=关于Copilot>关于Copilot</a></li></ul>
</li>
<li>
<a href=#%e8%ae%bf%e9%97%ae%e5%88%86%e6%9e%90%e5%b7%a5%e5%85%b7 aria-label=访问分析工具>访问分析工具</a></li>
<li>
<a href=#%e5%9f%9f%e5%90%8d%e6%98%a0%e5%b0%84 aria-label=域名映射>域名映射</a>
</li>
</ul>
</div>
</details>
</div>
<div class=post-content><p>大年初五，GitHub给我送来了迟到的新年礼物：<a href=https://copilot.github.com>Copilot技术预览版</a>的测试资格——而距离我提交申请，已经过去了近三个月的时间。Copilot开发团队称Copilot可以帮助开发者快速使用一门不熟悉的编程语言进行功能实现，而作为一名半吊子程序员，在<a href=https://www.beiluowang.com/tags/%E6%96%B0%E5%B9%B4%E6%96%B0%E5%AE%B6/>博客迁移</a>的过程中我正面临着自动化文章发布流程的问题。此前还在担心对于<code>SHELL SCRIPT</code>比较陌生，自动化脚本的编写会比较困难。刚好趁此机会，感受一下Copilot的功能。虽然在此前已经在官方的demo中见识到了Copilot的强大，但实际使用的过程中还是被惊到——它不仅仅是在GitHub庞大的代码库中进行检索和匹配，还能预测到我下一步想要进行的操作。而我自己，在很多时候，只需要一直按<code>tab</code>就够了。</p>
<p>在本篇文章中，我将结合自动化发布脚本的实现，对Copilot的使用感受进行介绍。然后再简单介绍一下访问分析工具的部署和域名映射的过程。</p>
<h2 id=博文自动化发布>博文自动化发布<a hidden class=anchor aria-hidden=true href=#博文自动化发布>#</a></h2>
<p>在<a href=https://www.beiluowang.com/tags/%E6%96%B0%E5%B9%B4%E6%96%B0%E5%AE%B6/>新年新家</a>系列的<a href=https://www.beiluowang.com/2022/02/new-year-new-home-hi-hugo/>第二篇文章</a>中，我总结了文章从完成写作到发布的四个步骤：</p>
<blockquote>
<ol>
<li>从Hugo模板新建博文<code>.md</code>文件；</li>
<li>导入Obsidian中的写好的内容，并调整图片等<code>markdown</code>语法格式以能够被Hugo识别；</li>
<li>网站编译；</li>
<li>上传到托管平台。</li>
</ol>
</blockquote>
<p>而实现博文的自动化发布，就是希望通过编写<code>SHELL</code>脚本，通过一行命令完成以上四个步骤。</p>
<p>我将脚本的实现分为以下几个模块：初始化、<code>meta-data</code>（Front Matter）调整、格式调整以及编译发布，下面依次进行介绍。</p>
<h3 id=初始化>初始化<a hidden class=anchor aria-hidden=true href=#初始化>#</a></h3>
<p>在初始化模块，主要涉及参数传递和路径设置。
值得一提的是，在<code>.sh</code>脚本文件头部，通过注释写完功能简介之后，Copilot竟然自己通过文件名推断出了<code>Author</code>信息，并帮我添加到了后续的注视中。比较奇怪的是，Copilot联想出来的时间信息不是当天，而是2008年的一天，不知是何原因。</p>
<h4 id=参数传递>参数传递<a hidden class=anchor aria-hidden=true href=#参数传递>#</a></h4>
<p>发布文章时需要指定用于生成博文路径（<code>url</code>）的Hugo目录中的文件名<code>filename</code>、Obsidian中对应的文件名<code>article_name.md</code>、标签<code>tags</code>以及发布标识符<code>auto_publish</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>：</p>
<pre tabindex=0><code># filename is used to define the url of the post
filename=$1

# article_name is used to identify the file in obisidian workspace
article_name=$2

# tags are used to define the tags of the post
tags=$3

# auto_publish is used to define whether the post should be published automatically
auto_publish=$4
</code></pre><p>在编写参数说明的过程中，基本上只需要键入参数名，Copilot就可以补全后续的说明本文，比如</p>
<figure class=align-center>
<img loading=lazy src=/images/screen_record_020901.gif#center alt=@王北洛> <figcaption>
<p>@王北洛</p>
</figcaption>
</figure>
<h4 id=工作路径>工作路径<a hidden class=anchor aria-hidden=true href=#工作路径>#</a></h4>
<p>需要分别设定<code>Hugo Project</code>和<code>Obsidian Workspace</code>的工作路径，并将<code>Obsidian Workspace</code>下的图片复制到<code>Hugo Project</code>中：<code>cp -r "$obsidian_workspace_path"/images/. "$hugo_project_path"/static/images</code>。</p>
<p>在完成参数和工作路径的设置之后，便可以通过<code>cd $hugo_project_path & hugo new posts/$filename.md</code>命令创建新博文。</p>
<h3 id=front-matter调整>Front Matter调整<a hidden class=anchor aria-hidden=true href=#front-matter调整>#</a></h3>
<p>在创建好的新博文<code>$filename.md</code>的<code>Front Matter</code>中，<code>title</code>默认的是<code>$filename</code>，<code>tags</code>是模版中设定的初始值，需要分别对其进行修改，即找到<code>$filename.md</code>文件中对应<code>title</code>和<code>tags</code>行进行内容替换。作为一个并不熟悉<code>SHELL</code>命令的人，我的想法是写一个<code>for</code>循环逐行查找。就在我键入相关注释文本之后，奇迹发生了：</p>
<figure class=align-center>
<img loading=lazy src=/images/screen_record_020902.gif#center alt=@王北洛> <figcaption>
<p>@王北洛</p>
</figcaption>
</figure>
<p><strong>Copilot不但给我提供了实现功能的脚本代码，还准确地预测到了我将要进行<code>tags</code>信息的替换！</strong></p>
<p>至此，我已经拜倒于Copilot的强大功能之下，并开始喜不自胜——再也不用读函数文档啦——虽然我不了解<code>sed</code>，但一点也不妨碍Copilot帮我调用！当然，现实并没有这么美好，此时的沾沾自喜为我后面的踩坑埋下了伏笔。</p>
<p>调整完<code>Front Matter</code>，还需要进行博文主体内容的合并，简单的<code>cat</code>命令就可以实现：<code>cat "$article_path" >> $filename.md</code>。</p>
<h3 id=格式调整>格式调整<a hidden class=anchor aria-hidden=true href=#格式调整>#</a></h3>
<p>由于Hugo不支持在<code>$filename.md</code>中直接调用<code>html</code>语句，要想实现图片居中和添加<code>caption</code>的功能，需要通过<code>shortcode</code>曲线救国。所以需要查找出<code>$filename.md</code>中涉及插入图片的段落进行修改。这不是一个简单的功能，但此时的我信心百倍，我深信，只要简单地在注释中写下：“<code>edit the image script with caption from markdown to hugo shortcode</code>”，只需要零点几秒钟，Copilot便会用魔法变出它的实现。不出我所料，Copilot马上给出了基于<code>sed</code>函数的实现。运行测试一下，<code>sed error: ... \2 not defined in the RE</code>，竟然报错了。</p>
<p>没关系，Copilot提供了好几种实现，试试其他的。<code>error</code>、<code>error</code>、输出结果不符合期待、<code>error</code>……当我把所有实现都试了一遍却没有一个可以正常工作的时候，我开始慌了。看着<code>sed</code>语句中密密麻麻的符号，我这时才意识到，我对这个函数一无所知。</p>
<p>接下来便是漫长的爬坑，从<a href=https://stackoverflow.com>stackoverflow</a>到函数文档，历时半个下午，我才把这行代码调通——只是一个很简单的参数传递格式的问题。回去审视一下Copilot提供的代码，功能上满足要求的只有两种实现，而这两种实现都是错的。</p>
<p><strong>原来Copilot也会犯错。</strong></p>
<h3 id=编译发布>编译发布<a hidden class=anchor aria-hidden=true href=#编译发布>#</a></h3>
<p>因为考虑到有时还要在博文中添加一些视频和<code>js</code>脚本，而Obsidian本身对这两者的支持并不好，需要单独对<code>$filename.md</code>进行编辑，不能直接发布，所以定义了<code>auto_publish</code>的参数用来判断是否执行编译发布模块。</p>
<p>这部分的脚本编写十分顺利，在<code># publish the post when auto_publish is true</code>的指引下，一路<code>tab</code>就完成了。</p>
<h3 id=关于copilot>关于Copilot<a hidden class=anchor aria-hidden=true href=#关于copilot>#</a></h3>
<p>关于Copilot，我最后再谈一下我的看法。它的功能不可谓不强大，甚至超出了我的想象。但是在使用的过程中，极易对其产生依赖性，甚至丧失独立思考的能力。对于一门不熟悉的编程语言，一旦遇到Copilot无法解决的问题或者给出的错误代码，由于没有线性的学习过程，很容易陷入手足无措的局面。</p>
<p>但我还是会坚持使用Copilot，因为它确实能极大地提高功能实现的效率，并且不乏优秀的实现方案。我对自己的要求是，每一次按下<code>tab</code>键的时候，我至少要知道为什么。</p>
<h2 id=访问分析工具>访问分析工具<a hidden class=anchor aria-hidden=true href=#访问分析工具>#</a></h2>
<p>很多互联网大厂都提高免费的网站访问分析工具，比如<a href=https://analytics.google.com/analytics/web/>Google Analytics</a> 、<a href=https://www.bing.com/webmasters/about>Bing Webmaster Tools</a>以及<a href=https://metrica.yandex.com/about?>Yandex metrica</a>d等。我没有太仔细地调研彼此间的差异，图方便直接选择了<a href=https://analytics.google.com/analytics/web/>Google Analytics</a>。配置过程比较方便，按照官网指引一步步操作，将提供的网站跟踪ID填入Hugo工程的配置文件中即可。</p>
<h2 id=域名映射>域名映射<a hidden class=anchor aria-hidden=true href=#域名映射>#</a></h2>
<p>博客迁移的最后一步是域名映射。</p>
<p>从2021年12月16日在Google Blogger发布第一篇文章，到今天也就不到两个月的时间。但我却感觉过了很久，已经习惯了时常打开管理主页看一看访问人数的增长，为每一个微小数字的增加而洋洋得意。在博客访问量即将突破1000的时候，我一遍又一遍地刷新管理页面，生怕错过了截图的时刻。在2022年1月15日深夜11:50，终于达到了博客访问量1000的目标，我把它截图发在了朋友圈里，“One Small Step”。</p>
<figure class=align-center>
<img loading=lazy src=/images/IMG_1417.jpg#center>
</figure>
<p>现在，我即将和Google Blogger说再见，希望自己在新的平台，用新的方式，坚持书写不变的初心，成为一名真正的<em><strong>写作者</strong></em>。</p>
<section class=footnotes role=doc-endnotes>
<hr>
<ol>
<li id=fn:1 role=doc-endnote>
<p>不将<code>article_name</code>直接作为<code>filename</code>的原因在于<code>article_name</code>一般为中文，将其用于<code>url</code>看起来不够和谐。&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p>
</li>
</ol>
</section>
</div>
<footer class=post-footer>
<ul class=post-tags>
<li><a href=https://www.beiluowang.com/tags/%E6%96%B0%E5%B9%B4%E6%96%B0%E5%AE%B6/>新年新家</a></li>
</ul>
<nav class=paginav>
<a class=prev href=https://www.beiluowang.com/2022/02/beiluowang-fresh-rss-trial-operation/>
<span class=title>« 上一页</span>
<br>
<span>王北洛的FreshRSS，试营业</span>
</a>
<a class=next href=https://www.beiluowang.com/2022/02/new-year-new-home-hi-hugo/>
<span class=title>下一页 »</span>
<br>
<span>新年新家，从Google Blogger到Hugo：2 不够优雅的Hugo体验</span>
</a>
</nav>
</footer><div id=cusdis_thread data-host=https://cusdic.vercel.app data-app-id=307f1a30-c4f4-4ac2-bcf7-88693c5ca635 data-page-id=c437cb122eebe3476ac067cb67508a63 data-page-url=https://www.beiluowang.com/2022/02/new-year-new-home-surprising-copilot/ data-page-title="新年新家，从Google Blogger到Hugo：3 令人惊喜的GitHub Copilot"></div>
<script defer src=https://cusdic.vercel.app/js/widget/lang/zh-cn.js></script>
<script defer src=https://cusdic.vercel.app/js/cusdis.es.js></script>
</article>
</main>
<footer class=footer>
<span><strong>Copyright © 2021 - 2022 Beiluo Wang, All Rights Reserved</strong></span>
</footer>
<a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a>
<script>let menu=document.getElementById('menu');menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script>
<script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script>
<script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script>
<script>document.querySelectorAll('pre > code').forEach(b=>{const c=b.parentNode.parentNode,a=document.createElement('button');a.classList.add('copy-code'),a.innerText='复制';function d(){a.innerText='已复制！',setTimeout(()=>{a.innerText='复制'},2e3)}a.addEventListener('click',e=>{if('clipboard'in navigator){navigator.clipboard.writeText(b.textContent),d();return}const a=document.createRange();a.selectNodeContents(b);const c=window.getSelection();c.removeAllRanges(),c.addRange(a);try{document.execCommand('copy'),d()}catch(a){}c.removeRange(a)}),c.classList.contains("highlight")?c.appendChild(a):c.parentNode.firstChild==c||(b.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?b.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(a):b.parentNode.appendChild(a))})</script>
</body>
</html>